# Vari√°veis üìà

## 4.1 - Conceito: o que s√£o vari√°veis üß∑

Vari√°veis s√£o basicamente nomes que apontam para uma determinada informa√ß√£o (valor).

O shell nos permite criar, atribuir e deletar vari√°veis.

Para criar vari√°veis, n√≥s definimos um nome e atribu√≠mos um valor a ele atrav√©s do operador de atribui√ß√£o `=`.

Por exemplo...

```bash
:~$ fruta="banana"
```

```bash
:~$ nomes=("Ahri", "Caitlyn", "Irelia")
```

```bash
:~$ nota=10
```

```bash
:~$ retorno=$(whoami)
```

> ‚ö†Ô∏è ***Importante!***
>
> *N√£o existem espa√ßos antes ou depois do `=`*

<br/>

Vari√°veis tamb√©m podem ser criadas atrav√©s de comandos, como √© o caso do comando interno `read`.

O comando `read` l√™ as informa√ß√µes que o usu√°rio digita no terminal e as armazena numa vari√°vel:

    #!/usr/bin/env bash

    read -p "Digite um nome: " nome
    echo "Nome: $nome"

<br/>

## 4.2 - Nomeando vari√°veis üìù

Os nomes de vari√°veis s√≥ podem conter...

* Letras mai√∫sculas e min√∫sculas de A a Z;
* N√∫meros;
* Sublinhado `_`

**Nomes de vari√°veis n√£o podem come√ßar com n√∫meros!**

<br/>

## 4.3 - Tipos de vari√°veis üîñ

Algumas linguagens exigem que se defina o tipo de vari√°vel que est√° sendo criada, mas este n√£o √© o caso do bash.

Para criar uma vari√°vel do tipo `string`, basta atribuir ao nome um valor entre aspas simples ou duplas...

```bash
:~$ str1="Isso √© uma string..."
:~$ str2='Isso tamb√©m!'
```

Para criar uma vari√°vel num√©rica, basta atribuir ao nome um valor sem aspas...

```bash
:~$ nota=10
:~$ valor=234.50
```

Quando uma vari√°vel armazena apenas um valor, n√≥s dizemos que essa vari√°vel √© `escalar`.

Quando dizemos que os tipos de vari√°veis n√£o precisam ser declarados no Bash, n√£o queremos dizer que isso n√£o pode ser feito.

A rigor, a menos que se declare o contr√°rio, o Bash ir√° tratar todas as vari√°veis como `strings`.

Para declarar o tipo da vari√°vel no Bash, utilizamos o comando interno `declare`.

As op√ß√µes mais utilizadas s√£o:

* declare -i -- declara vari√°vel do tipo inteiro;
* declare -A -- declara arrays associativos;
* declare -p -- exibe os atributos da vari√°vel;

Mas a lista de op√ß√µes √© enorme, oferecendo recursos muito √∫teis para o tratamento de vari√°veis.

No bash, tamb√©m podemos criar vari√°veis indexadas (arrays), que √© quando uma vari√°vel armazena uma cole√ß√£o de valores, cada um deles identificado por um √≠ndice.

```bash
:~$ alunos=("Evelynn", "Orianna", "Syndra")
```

Ou assim:

```bash
:~$ alunos[0]="Evelynn"
:~$ alunos[0]="Orianna"
:~$ alunos[0]="Syndra"
```

A menos que os √≠ndices tenham sido nomeados no momento da cria√ß√£o da array, por padr√£o, os valores ser√£o indexados pelo shell com n√∫meros a partir de 0.


Geralmente, no contexto da programa√ß√£o em Bash, quando falamos de `tipos de vari√°veis` √© mais comum estarmos no referindo ao escopo e ao comportamento das vari√°veis do ponto de vista do shell.

Neste caso, existem tr√™s tipos de vari√°veis no shell:

- Locais: presentes apenas na sess√£o corrente do shell e dispon√≠veis apenas para ele;

- De ambiente: dispon√≠veis para todos os processos executados no shell;

- Especiais: que o pr√≥prio shell define, podendo ser tanto locais quanto de ambiente;


### 4.3.1 - Vari√°veis locais üìç

As `vari√°veis locais`, do ponto de vista do shell, s√£o aquelas que n√≥s criamos no terminal ou nos nossos scripts da forma que vimos at√© aqui nesta aula.

Elas n√£o podem ser acessadas por outros programas e s√£o eliminadas assim que a sess√£o do shell termina.

**Comando relacionado: `exit` (built-in)**

O comando `exit` encerra a sess√£o do shell iniciada pela execu√ß√£o de um script, pela abertura de um terminal ou pelo login em um console (tty).

Nos scripts, n√≥s podemos determinar o status de sa√≠da com um n√∫mero (como `0` para sucesso e `1` para erro).

Caso o status de sa√≠da seja omitido, ele ser√° o mesmo do √∫ltimo comando executado.

### 4.3.2 - Vari√°veis de ambiente üå±

As `vari√°veis de ambiente` s√£o definidas no in√≠cio da sess√£o do shell e podem ser configuradas pelo sistema no boot, por instaladores de programas ou pelo pr√≥prio usu√°rio.

Seu comportamento n√£o √© diferente das vari√°veis locais, a n√£o ser pelo fato de que elas ficam dispon√≠veis para todos os programas.

Essa diferen√ßa vem da forma como elas s√£o criadas.

### 4.3.3 - Vari√°veis globais üåé

√â importante saber que, dentro de um script, todas as vari√°veis podem ser `vistas` por todos os blocos e instru√ß√µes do c√≥digo.

Isso √© o que chamamos de `vari√°veis globais`.

Quando queremos que uma vari√°vel seja vista apenas por um bloco de c√≥digo espec√≠fico, temos que fazer isso explicitamente atrav√©s do comando interno `local`.

<br/>

## 4.4 - Vari√°veis inalter√°veis üîí

Geralmente, uma vari√°vel que n√£o se altera seria chamada de `constante`, mas estamos falando de uma propriedade que vai al√©m disso.

As vari√°veis `inalter√°veis`, tamb√©m s√£o chamadas de `somente-leitura` ou `read-only`.

Elas n√£o podem nem ser destru√≠das, a n√£o ser encerrando a sess√£o do shell.

Para tornar uma vari√°vel `read-only`, utilizamos o comando interno, `readonly` ou o comando `declare` com o argumento `-r`.

**A tentativa de alterar ou eliminar uma vari√°vel real-only resultar√° no retorno de um erro.**

```bash
:~$ fruta='banana'
:~$ readonly fruta
:~$ fruta='laranja'

bash: fruta: a vari√°vel permite somente leitura
```

<br/>

## 4.5 - Destruindo vari√°veis ‚ò†Ô∏è

Quando criamos uma vari√°vel, ela entra para uma lista e passa a ser rastreada pelo shell enquanto dura a sess√£o.

Para remover a vari√°vel desta lista, n√≥s utilizamos o comando interno `unset`.

```bash
:~$ fruta=banana
:~$ echo $fruta
banana
:~$ unset fruta
:~$ echo $fruta
:~$
```

>***Lembrete!***
>
>*Vari√°veis `read-only` **n√£o** podem ser destru√≠das!*

<br/>

## 4.6 - Atribuindo sa√≠das de comandos a vari√°veis üîó

Tamb√©m √© poss√≠vel atribuir a sa√≠da de um comando a uma vari√°vel utilizando as `substitui√ß√µes de comando`.

```bash
variavel=$(commando)
variavel=`comando`
```

Exemplos:

```bash
:~$ usuario=$(whoami)
:~$ echo $usuario
asuka
```

```bash
:~$ maquina=$(hostname)
:~$ echo $maquina
eva-02
```

<br/>

## 4.7 - Acessando os valores das vari√°veis üíø

De tanto ver exemplos, podemos deduzir que basta prefixar o caractere `$` ao nome da vari√°vel para ter acesso ao seu conte√∫do.

Portanto, vamos apenas analisar o exemplo abaixo:

```bash
:~$ read -p "Digite o seu nome: " nome
Digite o seu nome: Asuka
:~$ mensagem="Ol√°, $nome!"
:~$ echo $mensagem
Ol√°, Asuka!
```