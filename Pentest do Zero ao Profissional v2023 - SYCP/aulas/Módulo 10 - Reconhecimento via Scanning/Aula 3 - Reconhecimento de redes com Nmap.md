# Reconhecimento de redes com Nmap

Nmap (**Network Mapper**) é uma ferramenta de mapeamento de redes. 

Possibilitando seus usuários a realizar port scans TCP, UDP, SYN Scan, verificar serviços rodando em determinada porta, etc.

## Comandos

Podemos realizar um scan em determinado host apenas usando o comando abaixo:

```bash
$ nmap <host>
```
Ou realizar o scan em um range de portas determinado, como abaixo, onde iremos realizar o scan em todas as portas partindo de 1 até 3000:

```bash
$ nmap <host> -p 1-3000
```
## Ampliar range de IP's

Podemos omitir o último valor do endereço IP utilizando uma máscara 192.168.100.0/24 para realizar o scan desde o 1 até 255. Utilizando o parametro `sL` (*scan list*) dizemos ao Nmap para não enviar nenhum pacote, apenas listar o scan:

```bash
$ nmap 192.168.100.0/24 -sL
```
Ou podemos ainda omitir não somente o último valor, para cobrir um range maior de IP's no nosso scan:

```bash
$ nmap 192.168.0.0/16
```

## Realizando Scan a partir de arquivos

Podemos realizar o scan a partir do uso de arquivos que contenham endereços de IP:

```bash
$ nmap -iL caminho/para/a/lista.txt
```

## Verificando versões dos serviços

É possível através do parametro `sV`, realizar a verificação dos serviços que estão rodando:

```bash
$ nmap -sV 127.0.0.1
```
Ou descobrir a versão do Sistema Operacional sendo utilizado por aquele serviço com o parametro `O`:

```bash
$ sudo nmap -O 127.0.0.1
```

## SYN scan

Para realizar um SYN scan, é necessário passar o parametro `-sS` ao executar o comando:

```bash
$ sudo nmap 127.0.0.1 -p 7878 -sS
```

## UDP scan

O scan de portas UDP são realizados com o parametro `-sU`:

```bash
$ sudo nmap -sU 127.0.0.1
```
É possível realizar o scan de todas as portas possíveis, apenas inserindo um `-` no parametro `-p`:

```bash
$ sudo nmap -sU 127.0.0.1 -p -
```

## -A

O parametro `-A` pode ser considerado um conjunto dos parametros para captura do `OS version`, `version detection`, `scripting scanning` e `traceroute`:

```bash
$ nmap -A 127.0.0.1
```

## Output do scan

Nmap nos permite realizar o output dos scans com o parametro `-oN`

```bash
$ sudo nmap 127.0.0.1 -sS -p 1-5000 -oN output_nmap
```

## Scripts

O Nmap possui uma engine de scripts nos permitindo verificar por vulnerabilidades, como no exemplo abaixo:

```bash
$ nmap 127.0.0.1 --script vuln
```
Assim, o Nmap irá executar alguns scripts para verificar se este endereço IP possui alguma vulnerabilidade, nos auxiliando a detectar possíveis aberturas para exploits, execução de código remoto ou obter uma shell reversa.
